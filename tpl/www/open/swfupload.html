<script type="text/javascript" src="libs/swfupload/swfupload.js"></script>
<script type="text/javascript" src="libs/swfupload/swfupload.queue.js"></script>
<script type="text/javascript" src="libs/swfupload/fileprogress.js"></script>
<script type="text/javascript" src="libs/swfupload/handlers.js"></script>
<div class="notice"><div class="p">
	<table width="100%" cellpadding="0" cellspacing="0">
	<tr>
		<td><span class="lead">&nbsp;&raquo; 选择/上传</span></td>
		<!-- if($_SESSION[user_id]) -->
		<form method="post" action="{:$page_url}">
		<td>关键字：<input type="text" name="keywords" value="{:$keywords}" id="keywords" style="width:65px;"> <input type="submit" value="搜索" class="button"></td>
		</form>
		<!-- end -->
		<td align="right">
			<table cellpadding="0" cellspacing="0">
			<form id="form1" action="{:$page_url}" method="post" enctype="multipart/form-data">
			<tr>
				<td><div id="divStatus"></div></td>
				<td>&nbsp;</td>
				<td><span id="spanButtonPlaceHolder"></span></td>
				<td>&nbsp;</td>
				<td style="display:none;"><input id="btnCancel" type="button" value="取消上传" onclick="swfu.cancelQueue();" disabled="disabled" /></td>
			</tr>
			</form>
			</table>			
		</td>
	</tr>
	</table>
</div></div>
<div id="fsUploadProgress" class="swfupload_progress"></div>
<script type="text/javascript">
var settings = {
	flash_url : "libs/swfupload/swfupload.swf",
	upload_url: "{:site_url('open,upload','',true,'&')}",
	post_params: {"{:SYS_SESSION_ID}" : "{:session_id()}"},
	file_size_limit : "200 MB",
	file_types : "{:$swfupload_filetype}",
	file_types_description : "{:$swfupload_note}",
	file_upload_limit : 100,
	file_queue_limit : 0,
	custom_settings : {
		progressTarget : "fsUploadProgress",
		cancelButtonId : "btnCancel"
	},
	debug: false,

	// Button settings
	button_image_url: "images/swfupload.png",
	button_placeholder_id : "spanButtonPlaceHolder",
	button_width: "62",
	button_height: "22",

	// The event handler functions are defined in handlers.js
	file_queued_handler : fileQueued,
	file_queue_error_handler : fileQueueError,
	file_dialog_complete_handler : fileDialogComplete,
	upload_start_handler : uploadStart,
	upload_progress_handler : uploadProgress,
	upload_error_handler : uploadError,
	upload_success_handler : uploadSuccess,
	upload_complete_handler : uploadComplete,
	queue_complete_handler : queueComplete	// Queue plugin event
};
swfu = new SWFUpload(settings);
</script>
